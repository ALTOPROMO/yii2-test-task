# Репозиторий с тестовым заданием

Вся логика сосредоточена внутри модели Employee (models/Employee.php), статический метод getFreeByService().

Метод максимально подробно закоментирован.

То есть, алгоритм работы такой:
1. Нам с фронта или из приложения приходит ID услуги и текст заявки.
2. В контроллере из модели вытягиваем свободного оператора.
3. Формируем заявку в базе данных со статусом 0 (заявка в работе или не обработана), а так же закрепляем за ней оператора.

Логика обработки запроса находится в контроллере controllers\TicketController.php, метод create.

Таблицы в базе данных:
- **employee** таблица со списком сотрудников. Из примечательного: включает в себя два столбца: start_date - ЧАС начала работы оператора, end_date - час конца работы. То есть аналогично date('G'), без ведущего нуля.
- **employee_service** - таблица для связи операторов и услуг, которыми они владеют и по которым могут консультировать.
- **ticket** - таблица с самими обращениями. Примечание: в столбце статус 0 - заявка не обработана, 1 - заявка решена.
- **service** - таблица со списком оказываемых услуг.

Модели по названиям аналогичны названиям таблиц и лежат в папке models/.

TODO:
- Можно вынести логику из модели в отдельный сервис.